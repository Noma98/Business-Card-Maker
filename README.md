<h1 align="center"><b>Noma - Business Card Maker</b></h1>
<p align="center">
<img src="https://img.shields.io/badge/madeÂ by-Noma-red">
<img src="https://img.shields.io/badge/React-17.0.2-blue">
<img src="https://img.shields.io/badge/Open%20Source-%F0%9F%A7%A1-brightgreen">
</p>
<img width="100%" alt="thumbnail" src="https://user-images.githubusercontent.com/69305320/118351680-3263f480-b598-11eb-8185-562466727427.png">  
<h2 align="center"><a href="https://merry-business-card-maker.netlify.app/"><b>Live Demo</b></a></h2>

# **ğŸ“ Description**
ì´ë²ˆ í”„ë¡œì íŠ¸ëŠ” Firebaseì™€ Cloudinaryë¥¼ ì´ìš©í•˜ì—¬ ë°±ì—”ë“œì™€ í†µì‹ í•˜ë©° ë™ì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ëª…í•¨ ì œì‘ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

## **How to use â“**
### **1. ë¨¼ì € ì†Œì…œ ê³„ì • ë˜ëŠ” ë¹„íšŒì›ìœ¼ë¡œ ë¡œê·¸ì¸ í•˜ì„¸ìš”!**
ğŸ“ ë¡œê·¸ì¸ uidì„ ì´ìš©í•´ ì €ì¥ëœ ì¹´ë“œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
> ë¹„íšŒì›ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ë©´ ì„œë¹„ìŠ¤ëŠ” ì´ìš©ì´ ê°€ëŠ¥í•˜ë‚˜ ìˆ˜ì •ëœ ë°ì´í„°ê°€ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 

![login](https://user-images.githubusercontent.com/69305320/118350811-a64fce00-b593-11eb-8d37-54dedbd16670.gif)

### **2. ì¹´ë“œë¥¼ ìƒì„±í•´ ëª…í•¨ ì •ë³´ë¥¼ ì €ì¥í•˜ì„¸ìš”.**
ğŸ“ `+` ë˜ëŠ” `delete` ë²„íŠ¼ì„ í´ë¦­í•´ ì¹´ë“œë¥¼ ìƒì„± ë° ì‚­ì œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![addAndDelete](https://user-images.githubusercontent.com/69305320/118350831-ba93cb00-b593-11eb-8288-ec331cafb19d.gif)

ğŸ“ `Maker`ì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ì™€ `Preview`ì— ë³€ê²½ëœ ì •ë³´ê°€ ë°”ë¡œ ë°˜ì˜ë©ë‹ˆë‹¤. 

![typing](https://user-images.githubusercontent.com/69305320/118350824-b23b9000-b593-11eb-8084-67c6f422a49e.gif)

ğŸ“ Cloudinaryë¥¼ ì´ìš©í•˜ì—¬ ì´ë¯¸ì§€ íŒŒì¼ì„ ì—…ë¡œë“œí•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

![imageUpload](https://user-images.githubusercontent.com/69305320/118350835-c089ac00-b593-11eb-8692-309f63ac10d8.gif)

ğŸ“ ì ì ˆí•œ ì´ë¯¸ì§€ê°€ ì—†ë‹¤ë©´ ì œê³µëœ ì•„ë°”íƒ€ë¥¼ ì„ íƒí•´ë³´ì„¸ìš”.

![selectAvatar](https://user-images.githubusercontent.com/69305320/118350838-c2536f80-b593-11eb-85a1-5b1ac3372b6e.gif)

ğŸ“ ë’¤ë¡œê°€ê¸°ë¥¼ ëˆ„ë¥´ë©´ ë‹¤ì‹œ ê¸°ë³¸ ì´ë¯¸ì§€ë¡œ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![back](https://user-images.githubusercontent.com/69305320/118350849-cc756e00-b593-11eb-91dc-2e9f529020a3.gif)
  
### **3. ì°¾ê³  ì‹¶ì€ ëª…í•¨ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”!**  
ğŸ“ ì´ë¦„ì„ ì´ìš©í•´ ê²€ìƒ‰ì–´ë¥¼ í¬í•¨í•˜ëŠ” ì¹´ë“œë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

![search](https://user-images.githubusercontent.com/69305320/118350841-c54e6000-b593-11eb-8e95-35c6d280d160.gif)
  
# **ğŸ” AboutÂ theÂ project**

### **ğŸ’» DevelopmentÂ Environment**Â 
: React.js,Â ReactÂ Router,Â Firebase, Cloudinary, PostCSS, VScode,Â Github

> â— ì•„ë˜ ì½”ë“œë“¤ì€ ì„¤ëª…ì„ ìœ„í•´ í•„ìš”í•œ ë¶€ë¶„ë§Œ ì¼ë¶€ ê°€ì ¸ì˜¨ ê²ƒìœ¼ë¡œ, ê´€ë ¨ ì—†ëŠ” ë¶€ë¶„ì€ `//...`ìœ¼ë¡œ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.

ìì„¸í•œÂ ì½”ë“œëŠ”Â [ì´ê³³](https://github.com/MerryHa/youtube/tree/master/src)ì—ì„œ í™•ì¸í•˜ì„¸ìš”.


### **âœ…Reat Router**
ë¦¬ì•¡íŠ¸ ë¼ìš°í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒí™©ì— ë”°ë¼ í˜ì´ì§€ ì´ë™ì´ ê°€ëŠ¥í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
```jsx
//app.jsx

import React from 'react';
import Login from './components/login/login';
import styles from './app.module.css';
import { BrowserRouter, Route, Switch } from 'react-router-dom';
import Maker from './components/maker/maker';

function App({ FileInput, authService, cardRepository }) {
  return <div className={styles.app}>
    <BrowserRouter>
      <Switch>
        <Route exact path="/">
          <Login authService={authService} />
        </Route>
        <Route path="/maker">
          <Maker
            FileInput={FileInput}
            authService={authService}
            cardRepository={cardRepository}
          />
        </Route>
      </Switch>
    </BrowserRouter>
  </div>;
}
```
### **âœ… Firebase ì´ìš©í•˜ê¸°** 

FirebaseConfigë¡œ Firebaseë¥¼ ì™¸ë¶€(ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ì•ˆX)ì—ì„œ initialize í•´ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì „ì²´ì ì¸ firebaseAppì„ exportí•˜ê¸° ë³´ë‹¤ëŠ” ì´í›„ ì“°ì¼ ê¸°ëŠ¥ë“¤ë§Œì„ í•œ ê³³ì—ì„œ ì •ì˜ í›„ exportí•´ ê° ëª¨ë“ˆì—ì„œ í•„ìš”í•œ ê²ƒì„ import í•˜ë„ë¡ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
```jsx
//firebase.js

import firebase from 'firebase/app';
import 'firebase/auth';
import 'firebase/database';

const firebaseConfig = {
   //...
};

const firebaseApp = firebase.initializeApp(firebaseConfig);
export const firebaseAuth = firebaseApp.auth();
export const firebaseDatabase = firebaseApp.database();

export const googleProvider = new firebase.auth.GoogleAuthProvider();
export const githubProvider = new firebase.auth.GithubAuthProvider();
```
### **âœ… Firebase Authentication**
ìœ„ì˜ ì½”ë“œì—ì„œ ë¡œê·¸ì¸í•˜ëŠ”ë° í•„ìš”í•œ providerë“¤ì„ ì •ì˜í–ˆì—ˆê¸° ë•Œë¬¸ì— ì´ë¥¼  import í•´ì„œ `singInWithPopup()`, `signInAnonymously()`, `signOut()`ì„ í˜¸ì¶œí•´ì¤ë‹ˆë‹¤. í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” êµ¬ê¸€, ê¹ƒí—ˆë¸Œ ê·¸ë¦¬ê³  ìµëª… ë¡œê·¸ì¸ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
```jsx
// auth_service.js

import { firebaseAuth, githubProvider, googleProvider } from './firebase';

class AuthService {
    login(providerName) {
        const authProvider = this.getProvider(providerName);
        return firebaseAuth.signInWithPopup(authProvider);
    }
    loginAnonymously() {
        return firebaseAuth.signInAnonymously();
    }
    logout() {
        firebaseAuth.signOut();
    }
    onAuthChange(onUserChanged) {
        firebaseAuth.onAuthStateChanged(user => {
            onUserChanged(user);
        })
    }
    getProvider(providerName) {
        switch (providerName) {
            case 'Google':
                return googleProvider;
            case 'Github':
                return githubProvider;
            default:
                throw new Error(`not supported provider: ${providerName}`);
        }
    }
}
export default AuthService;
```
### **âœ… Firebase Realtime Database**
ë°ì´í„°ë² ì´ìŠ¤ì— ê´€ë ¨ëœ ëª¨ë“  ê²ƒì„ card_repository.jsì—ì„œ classì˜ ë©¤ë²„í•¨ìˆ˜ë¡œ ì •ì˜í•´ì¤ë‹ˆë‹¤. 

`saveCard`ì™€ `removeCard` í•¨ìˆ˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ ì›í•˜ëŠ” ê²½ë¡œ(`ref`)ì— ë°ì´í„°ë¥¼ ì €ì¥(`set`)í•˜ê³  ì‚­ì œ(`delete`)í•´ì¤ë‹ˆë‹¤.

ê·¸ë¦¬ê³  `syncCard` í•¨ìˆ˜ëŠ” `ref`ì— ë¦¬ìŠ¤ë„ˆë¥¼ ë“±ë¡í•´ ë³€ê²½ì‚¬í•­ì„ ìˆ˜ì‹ (`.on`)í•˜ê³  ì½ì–´(`.val()`)ì™€ ë°ì´í„°ê°€ ì¡´ì¬í•˜ë©´ ë“±ë¡ëœ ì½œë°±í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì¤ë‹ˆë‹¤.  ì´ëŠ” ì¶”í›„ ë¦¬ìŠ¤ë„ˆ ì œê±°ë¥¼ ìœ„í•´ `.off`í•¨ìˆ˜ë¥¼ ë¦¬í„´í•´ì£¼ê³  í•´ë‹¹ í•¨ìˆ˜ë¥¼ ë°›ì•„ì˜¨ ê³³(useEffect ì•ˆ)ì—ì„œ cleanup í•¨ìˆ˜ë¡œ ë“±ë¡(ğŸŒˆë¶€ë¶„)í•©ë‹ˆë‹¤.

       
```jsx
//card_repository.js

import { firebaseDatabase } from './firebase';

class CardRepository {
    syncCard(userId, onUpdate) {
        const ref = firebaseDatabase.ref(`${userId}/cards`);
        ref.on('value', snapshot => {
            const value = snapshot.val();
            value && onUpdate(value);
        })
        return () => ref.off;
    }
    saveCard(userId, card) {
     firebaseDatabase.ref(`${userId}/cards/${card.id}`).set(card);
    }
    removeCard(userId, card) {
      firebaseDatabase.ref(`${userId}/cards/${card.id}`).remove();
    }
}
export default CardRepository;
```

### **âœ… Cloudinary ì´ìš©í•˜ê¸°**


ì‚¬ìš©ìë¡œë¶€í„° íŒŒì¼ ì¸ìë¥¼ ë°›ì•„ì„œ ì„œë²„ì— ì—…ë¡œë“œí•˜ê³ , ì—…ë¡œë“œê°€ ì™„ë£Œë˜ë©´ ì„œë²„ì— ìˆëŠ” ì´ë¯¸ì§€ URLì„ ë¦¬í„´í•©ë‹ˆë‹¤. ì´í›„ ë°›ì•„ì˜¨ URLë¡œ Preview ëª…í•¨ì—ì„œ ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

```jsx
class ImageUploader {
    async upload(file) {
        const data = new FormData();
        data.append("file", file);
        data.append("upload_preset", "adtghtzy");
        const result = await fetch(
            "https://api.cloudinary.com/v1_1/qdiuyd3/upload",
            {
                method: "POST",
                body: data
            }
        );
        return await result.json();
    }
}
export default ImageUploader;
```

### **âœ… DependencyÂ Injection** 

ë°ì´í„° í†µì‹ ì„ `App` ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„° ë¶„ë¦¬ì‹œí‚¤ê¸° ìœ„í•´ `AuthService`, `CardRepository`, `ImageUploader` í´ë˜ìŠ¤ë¥¼ ì™¸ë¶€ì—ì„œ ìƒì„±í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ë¡œ ì£¼ì…í•˜ì˜€ìŠµë‹ˆë‹¤.
```jsx
// index.js

import React, { memo } from 'react';
import ReactDOM from 'react-dom';
import './index.module.css';
import App from './app';
import AuthService from './service/auth_service';
import ImageUploader from './service/image_uploader';
import ImageFileInput from './components/image_file_input/image_file_input';
import CardRepository from './service/card_repository';

const authService = new AuthService();
const cardRepository = new CardRepository();
const imageUploader = new ImageUploader();

const FileInput = memo(props => (
  <ImageFileInput {...props} imageUploader={imageUploader} />
));

ReactDOM.render(
  <React.StrictMode>
    <App authService={authService} FileInput={FileInput} cardRepository={cardRepository} />
  </React.StrictMode>,
  document.getElementById('root')
);
```

ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ë¥¼ propsë¡œ ë§ë‹¨ì— ìˆëŠ” ImageFileInput ì»´í¬ë„ŒíŠ¸ê¹Œì§€ ì „ë‹¬í•˜ë ¤ë©´ ì—¬ëŸ¬ê°€ì§€ propsë“¤ì„ ì—¬ê¸°ì„œë¶€í„° ê³„ì† ì „ë‹¬í•´ ë‚´ë ¤ê°€ì•¼í•œë‹¤.
FileInputì´ë¼ëŠ” ê²ƒì„ ë§Œë“¤ì–´ propsì„ ë°›ì•„ ImageFileInputì„ ë§Œë“¤ì–´ í•œë²ˆì— ì „ë‹¬í•´ ë‚´ë ¤ê°„ë‹¤. ì´ë•Œ í•„ìˆ˜ì ìœ¼ë¡œ í•„ìš”í•œ propsëŠ” ì‘ì„±í•´ì„œ ëª…ì‹œí•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” propsë¡œ ì „ë‹¬í•´ì¤€ë‹¤.
ì´ë ‡ê²Œ í•˜ë©´ ë¶ˆí•„ìš”í•˜ê²Œ ë§ì€ ì„œë¹„ìŠ¤ë¥¼ ì „ë‹¬í•˜ì§€ ì•Šì•„ë„ ë˜ê³ , ë‚˜ì¤‘ì— FileInputì—ì„œ ë”ë§ì€ ì„œë¹„ìŠ¤ë“¤ì„ í•„ìš”ë¡œ í•˜ê²Œ ëœë‹¤ë©´ ì´ê³³ì—ì„œë§Œ ìˆ˜ì •í•´ì£¼ë©´ ëœë‹¤. ê³ ë¡œ ì´ë ‡ê²Œ ë§Œë“¤ë©´ í™•ì¥ì„±ì´ ì¢‹ì•„ì§€ê²Œ ëœë‹¤.

í•œ í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ í•„ìš”í•œ ëª¨ë“  ì•„ì´ë“¤ì„ ìƒì„±(importí•´ì„œ ì‚¬ìš©í•˜ëŠ”ê²ƒ) í•˜ê²Œ ë˜ë©´, ê°ì²´ë“¤ê°„ì˜ ì»¤í”Œë§ì´ ê°•ë ¥í•˜ê²Œ í˜•ì„±ì´ ë˜ê³ , ImageFileInput ì»´í¬ë„ŒíŠ¸ëŠ” í•­ìƒ í•˜ë‚˜ì˜ ImageUploaderë°–ì— ì“¸ ìˆ˜ ì—†ì–´ì„œ ë‚˜ì¤‘ì— ìœ ë‹›í…ŒìŠ¤íŠ¸ ì‘ì„±í• ë•Œë„ í˜ë“¤ì–´ìš”.

í•„ìš”í•œ ë°íœë˜ì‹œ (ë‹¤ë¥¸ í´ë˜ìŠ¤ë‚˜ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬) ë“¤ì„ ì™¸ë¶€ë¡œë¶€í„° ì£¼ì… ë°›ìœ¼ë©´, ìœ ë‹›í…ŒìŠ¤íŠ¸í• ë•Œë„ ì‹¤ì œë¡œ ì—…ë¡œë“œë¥¼ í•˜ì§€ ì•ŠëŠ” ê°€ì§œì˜ ImageUploaderë¥¼ ë°›ì•„ ì˜¬ ìˆ˜ ìˆì–´ì„œ í…ŒìŠ¤íŠ¸ì„±ì´ ì¢‹ì•„ì§€ì£  :) 

### **âœ… ì‹¤ì œë¡œ ì‚¬ìš©ë˜ëŠ” ê³³ - Maker ì»´í¬ë„ŒíŠ¸**
ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ(ë ) ëª…í•¨ ë°ì´í„°ë¥¼ stateë¡œ ê°€ì§€ê³  ìˆëŠ” ê³³ì´ Maker ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë¡œê·¸ì¸ ë° ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ í´ë˜ìŠ¤ë“¤ì„ propsìœ¼ë¡œ ì „ë‹¬ë°›ì•„ì™€ ê° ë©¤ë²„í•¨ìˆ˜ë“¤ì„ ì‚¬ìš©í•´ ë¡œê·¸ì¸ ë° ì¹´ë“œ ì •ë³´ë¥¼ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤.

```jsx
// maker.jsx

//...
const Maker = ({ FileInput, authService, cardRepository }) => {
    const history = useHistory();
    const historyState = history.location.state;
    const [cards, setCards] = useState({});
    const [userId, setUserId] = useState(historyState && historyState.id);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        if (!userId) {
            return;
        }
        const stopSync = cardRepository.syncCard(userId, value => {
            setCards(value);
        });
        return () => stopSync(); //ğŸŒˆ
    }, [userId, cardRepository]);

    useEffect(() => {
        authService.onAuthChange(user => {
            if (user) {
                setUserId(user.uid);
            } else {
                history.push('/');
            }
            setLoading(false);
        });
    }, [authService, history]);

    const onLogout = useCallback(() => {
        authService.logout();
    }, [authService]);

    const createOrUpdateCard = card => {
        setCards(cards => {
            const updated = { ...cards };
            updated[card.id] = card;
            return updated;
        });
        cardRepository.saveCard(userId, card);
    };

    const deleteCard = card => {
        setCards(cards => {
            const updated = { ...cards };
            delete updated[card.id];
            return updated;
        });
        cardRepository.removeCard(userId, card);
    };

    return (
        <section className={styles.maker}>
            {loading && <div className={styles.loadingContainer}><div className={styles.loading}></div></div>}
            {!loading && <>
                <Header onLogout={onLogout} />
                <div className={styles.container}>
                    <Editor
                        FileInput={FileInput}
                        cards={cards}
                        addCard={createOrUpdateCard}
                        updateCard={createOrUpdateCard}
                        deleteCard={deleteCard}
                    />
                    <Preview cards={cards} />
                </div>
            </>}
        </section>
    )
};
export default Maker;
```





